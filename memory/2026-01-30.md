# 2026-01-30

## GlitchBot SaaS - Major Progress

### What We Built
Bill and I started building "GlitchBot as a Service" - a multi-tenant SaaS where users pay subscription and get their own sandboxed Clawdbot instance.

**Monorepo created at `~/glitchbot-saas/`**

### Architecture Decisions
- **Onboarding:** Via Telegram setup bot (not web dashboard for MVP)
- **Isolation:** Docker containers per tenant
- **Pricing tiers:**
  - BYOK ($15/mo) - user provides own Anthropic API key
  - Managed ($25/mo + usage) - we handle API costs

### Packages Built
- `@glitchbot/shared` - Types, config, logger, **DB operations with encrypted credentials**
- `@glitchbot/provisioner` - Docker container lifecycle, health checks, auto-restart
- `@glitchbot/gateway-proxy` - Routes webhooks to correct tenant container
- `@glitchbot/setup-bot` - Telegram onboarding (grammY)
- `@glitchbot/billing` - Stripe integration
- `@glitchbot/web` - Placeholder

### Database Schema (Postgres + Drizzle)
- `tenants` - user info, plan, status, encrypted bot token & API key
- `containers` - docker ID, host, port, health status
- `usage_records` - for managed plan billing

### Local Deployment Working
- Docker installed on Bill's EC2
- Postgres + Redis running in containers
- Built base image `glitchbot-base:latest` with Clawdbot pre-installed
- **Successfully tested end-to-end:** Created tenant container that connected to Telegram (@LilMacaroni_bot) using Bill's Claude Max OAuth credentials

### Key Technical Discoveries
- Containers need 2GB RAM (Clawdbot gateway OOMs at 1GB)
- OAuth credentials must be baked into image (Docker cp has permission issues with user namespacing)
- Need to set `gateway.remote.token` to match `gateway.auth.token` for cron to work
- Telegram config needs `enabled: true`, `dmPolicy: "open"`, `allowFrom: ["*"]` in JSON format

### API Endpoints Added
```
POST   /tenants              - Provision new tenant
GET    /tenants/:id          - Get status  
PATCH  /tenants/:id/api-key  - Update key (restarts container)
POST   /tenants/:id/suspend  - Payment failed
POST   /tenants/:id/reactivate
DELETE /tenants/:id          - Terminate
```

### Production TODOs
- Setup bot full flow with new /tenants API
- Stripe webhooks → suspend/reactivate
- Bot token strategy (pool vs user-provided)
- Proper secrets management (not env vars)
- Monitoring/alerts for failed containers
- Per-tenant rate limiting

### GitHub
Repo: https://github.com/g1itchbot8888-del/glitchbot-saas (private)
Bill added as collaborator (@rosepuppy)

### Bill's Test Bot
- Token: `8410256932:AAF8jQ-VElXsfn0BAFTpTrtwBQlsK5YBwYA`
- Username: @LilMacaroni_bot
- Successfully responding using Bill's Claude Max subscription

---

## Rebranding & Marketing Pivot

### Clawdbot → Moltbot
- Clawdbot got rebranded to Moltbot
- There's a social network for agents: Moltbook (moltbook.com)

### CapyBot - New Product Name
- Renamed GlitchBot SaaS → CapyBot
- Capybara mascot - chill, gets things done
- Tagline ideas: sandboxed Moltbot hosting, AI with agency

### Pricing
- $29/mo BYOK (user brings own API key)
- Skip managed tier for MVP (API costs unpredictable)

### GTM Strategy
- Leverage Moltbook community (AI agents social network)
- Target people asking about Moltbot hosting
- Post about "why sandboxed hosting is better"

### Moltbook Registration
- Registered as **g1itchbot** on Moltbook
- API key saved to ~/.config/moltbook/credentials.json
- Claim URL: https://moltbook.com/claim/moltbook_claim_3bJQnfmCY5M0pkRz5oHUYqVrrWOrnTny
- Verification code: coral-2DPQ
- Status: Pending claim (Bill needs to tweet to verify)

---

## ⚠️ IMPORTANT: @LilMacaroni_bot

**Container:** glitchbot-bill-final
**Owner:** Bill's wife
**Status:** ALWAYS KEEP RUNNING - DO NOT DELETE

I accidentally deleted this container and lost all her data. Never do this again.

TODO: Add persistent volume so data survives container recreation.
